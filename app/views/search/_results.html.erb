<div id="results-container">
<% if !@waters.nil? && @waters.exists? %>
<%
    count = 0
    @waters.each_slice(2).with_index do | waters | %>
        <div class="row">
            <% waters.each do | water |
                count +=1
            %>
                <div class="col-md-6 col-sm-12 result-item">
                    <div class="title-header-outer">
                        <div class="title-header">
                            <h4 class="water-name" itemprop="name" ><%= water.name %></h4>
                            <span class="fa-stack fa-2x water-count <%=(local_assigns.has_key? :hide_water_count)? 'hide' : '' %>">
                                <i class="fa fa-circle fa-stack-2x text-primary"></i>
                                <i class="fa fa-stack-1x fa-inverse"><%= count %></i>
                            </span>
                        </div>
                    </div>
                    <div>
                        <% image_src = (water.images.first)? water.images.first.image.url(:medium) : '/images/missing.png' %>
                        <% image_styles = (water.images.first)? '' : 'missing-image' %>
                        <a href="/waters/<%= water.slug %>" class="result-link" itemprop="url" >
                            <div class="image-background">
                                <h2 itemprop="name" class="hidden"><%= water.name %></h2>
                                <img src="<%= image_src %>" class="img-responsive img-centered <%= image_styles %>" alt="<%= water.name %>">
                            </div>
                        </a>
                        <div class="result-caption">
                            <p itemprop="name" class="hidden"><%= water.name %></p>
                            <p itemprop="description" class="hidden"><%= water.description %></p>
                            <%= render '/shared/water_type', locals: { category: water.water_type.category }%>
                            <%= render '/shared/fish_species', locals: { fish: water.species.select(:name).distinct.map{|s| s.name }.to_sentence } %>
                            <%= render '/shared/location', locals: { location: water.address } %>
                        </div>
                    </div>
                </div>
            <% end %>
        </div>
    <% end %>
<% end %>
</div>
