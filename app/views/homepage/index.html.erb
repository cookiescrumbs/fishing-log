<script src="https://maps.googleapis.com/maps/api/js?v=3.exp"></script>
<script type="text/javascript">
  var map;

  function initialize() {
    map = new google.maps.Map(document.getElementById('map'), {
      zoom: 5,
      center: new google.maps.LatLng(54.43869834845736, -2.2472353515624945),
      mapTypeId: google.maps.MapTypeId.ROADMAP
    });

    var xhr = new XMLHttpRequest();
    xhr.open('GET', '/homepage/index.json', true);
    xhr.onload = function() {
      addMarkers(JSON.parse(this.responseText));
    };
    xhr.send();
  }

  function addMarkers(results) {
   for (var i = 0; i < results.length; i++) {
      var latLng = new google.maps.LatLng(results[i].lat,results[i].lng);
      var marker = new google.maps.Marker({
        position: latLng,
        map: map
      });
    };
  }

  // Onload handler to fire off the app.
  google.maps.event.addDomListener(window, 'load', initialize);
</script>
 <style>
      html, body, #map_canvas { margin: 0; padding: 0; height: 100%; }
    </style>

<div id="map" style='width: 100%; height: 600px;'></div>
